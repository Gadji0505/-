Ниже — полностью обновлённый **Отчёт по лабораторной работе №6**, переписанный так, чтобы тема и все диаграммы соответствовали **теме из ЛР5 — автоматизация продаж автомобилей в автосалоне**. Я опирался на материалы вашей ЛР5. 

Скопируй/вставь этот текст в свой шаблон отчёта (или скажи — сохраню в `Lab6_updated.docx`), при необходимости подправлю поле «Выполнил / Принял» и рисунки.

---

МИНИСТЕРСТВО НАУКИ И ВЫСШЕГО ОБРАЗОВАНИЯ РОССИЙСКОЙ ФЕДЕРАЦИИ
Федеральное государственное бюджетное образовательное учреждение высшего образования
«КУБАНСКИЙ ГОСУДАРСТВЕННЫЙ УНИВЕРСИТЕТ»
Факультет компьютерных технологий и прикладной математики
Кафедра информационных технологий

ОТЧЕТ
о выполнении лабораторной работы №6
по дисциплине «Программная инженерия»

Выполнил студент группы МО31/2 ___________  (Ф.И.О.)
Направление подготовки 02.03.03 …
Курс 3

Отчёт принял: кандидат пед. наук, доцент ___________

Краснодар
2025 г.

---

# ВВЕДЕНИЕ

**Тема:** разработка функциональной структуры программного продукта: объектно-ориентированный подход.
**Цель:** изучение методики объектно-ориентированного подхода для разработки и описания функциональности ПО, освоение средств UML для построения моделей поведения.
**Индивидуальная тема:** Автоматизация продаж автомобилей в автосалоне (тема ЛР5). 

**Задачи лабораторной работы:**

1. Выбрать из диаграммы классов (ЛР5) до трёх классов-сущностей с наибольшей динамикой состояний и построить для них диаграммы состояний (statechart).
2. Для основных вариантов использования (use cases) построить диаграммы деятельности (activity), включая дорожки (swimlanes) для взаимодействующих ролей.
3. Для каждого прецедента выделить объекты, участвующие во взаимодействии, и заполнить таблицу списка объектов.
4. Построить диаграммы последовательности (sequence) и, при необходимости, кооперационные диаграммы (collaboration) для прецедентов.
5. Убедиться, что диаграммы поведения покрывают операции классов диаграммы классов. (Основываясь на результатах ЛР5.) 

---

# 1. Выбор классов для диаграмм состояний

На основе диаграммы классов, построенной в ЛР5 (см. ЛР5 — выявленные абстракции и поведение), выбраны три класса, наиболее часто меняющие состояние в процессе продажи автомобиля:

* **Заявка (Заявка/Lead/Request)** — жизненный цикл обработки запроса от клиента. 
* **Автомобиль (Автомобиль/Car)** — статус наличия/резерва/продажи. 
* **Договор (Договор/Contract)** — стадии оформления, согласования и оплаты сделки. 

## 1.1. Диаграмма состояний — **Заявка**

**Состояния:**

* `Создана` — заявка зарегистрирована (старт).
* `Проверяется` — валидация данных клиента и проверка интереса.
* `Проверена` — подтверждена корректность данных и доступность товара.
* `В обработке` — инициирован процесс бронирования/договора.
* `Отменена` — заявка закрыта без сделки (по желанию клиента или по причине недоступности).
* `Завершена` — заявка привела к продаже (перешла в сделку/архив).

**События/переходы:**

* `создатьЗаявку()` → `Создана`
* `проверитьДанные()` (валидно) → `Проверена`
* `проверитьДанные()` (ошибка) → `Отменена` / `Возврат на ввод`
* `начатьБронирование()` → `В обработке`
* `отменитьЗаявку()` → `Отменена`
* `закрытьКакУспешную()` → `Завершена`

(К каждому переходу добавить действия: логирование, уведомления кассира/клиента, обновление БД.) 

## 1.2. Диаграмма состояний — **Автомобиль**

**Состояния:**

* `В наличии` (Available)
* `Забронирован` (Reserved)
* `Продан` (Sold)
* `Резерв отменён` / `Возврат в наличе` (Back to Available)
* `Сервис/недоступен` (Unavailable — тех. причины)

**События:**

* `резервировать()` (успех) → `Забронирован`
* `продать()` → `Продан`
* `отменитьРезерв()` → `В наличии`
* `пометитьНедоступным()` → `Сервис/недоступен`
* `вернутьВналичие()` → `В наличии`

(На переходе в `Забронирован` создаётся объект Брони/Записи, привязывается к заявке; при `Продан` — генерируется договор и создаётся запись Платежа.) 

## 1.3. Диаграмма состояний — **Договор**

**Состояния:**

* `Черновик` (Draft)
* `На согласовании` (PendingApproval)
* `Согласован` (Approved)
* `Отклонён` (Rejected)
* `Оплачен` (Paid)
* `Архив` (Archived)

**События:**

* `сформироватьПроект()` → `Черновик`
* `отправитьНаСогласование()` → `На согласовании`
* `утвердить()` → `Согласован`
* `отклонить()` → `Отклонён`
* `зарегистрироватьОплату()` → `Оплачен`
* `архивировать()` → `Архив`

(Действия при переходах: уведомление руководителя, привязка платежа, изменение статуса автомобиля.) 

---

# 2. Диаграммы деятельности (Activity diagrams)

На основе основных прецедентов и потоков событий, описанных в ЛР5, построены диаграммы деятельности для трёх ключевых процессов: **Обработка заявки**, **Подбор и бронирование автомобиля**, **Оформление договора и приём оплаты**. 

> Примечание: для прецедентов с несколькими действующими лицами диаграммы выполнены с дорожками (swimlanes) — роли: Кассир / Система / Руководитель / Клиент / База данных.

## 2.1. Диаграмма деятельности — «Обработка записи клиента»

**Swimlanes:** Клиент, Кассир, Система, База данных

Короткое описание шагов (последовательность):

1. Клиент инициирует запрос (онлайн/офлайн).
2. Кассир/система принимает заявку — ввод данных клиента.
3. Система выполняет валидацию (проверка обязательных полей).

   * при ошибке: возвращается на ввод; лог и уведомление.
4. Система ищет автомобиль по запросу (фильтр прайс-листа).

   * если авто найдено и статус `В наличии` — присваивается `Проверена`.
   * если нет — информирует кассира (альтернативный поток).
5. Кассир уведомляет клиента о результате.

**Альтернативные потоки:**

* Автомобиль отсутствует → предложить альтернативы / перевести в `Отменена`.
* Некорректные данные → запрос корректировки.

(Диаграмма должна содержать условия и ветвления `if/else`, синхронизацию и конечные узлы.) 

## 2.2. Диаграмма деятельности — «Подбор и бронирование автомобиля»

**Swimlanes:** Кассир, Система, Мастер/Склад (если требуется проверка авто), База данных

Шаги:

1. Кассир инициирует бронирование для заявки `Проверена`.
2. Система проверяет актуальность статуса автомобиля.

   * Если `В наличии` → создать бронь, изменить статус автомобиля на `Забронирован`.
   * Если уже `Забронирован/Продан` → вернуть конфликт бронирования (альтернативный поток).
3. Система генерирует предварительную калькуляцию стоимости сделки.
4. Система уведомляет кассира и клиента о результате брони.

**Альтернативы/исключения:**

* Конфликт бронирования → откат операции, предложить выбрать другое авто.
* Ошибка БД → ретрай/уведомление администратора. 

## 2.3. Диаграмма деятельности — «Оформление договора и приём оплаты»

**Swimlanes:** Кассир, Руководитель, Клиент, Система, БД

Шаги:

1. Кассир формирует проект договора на основе данных заявки и авто.
2. Система отправляет договор руководителю на согласование.
3. Руководитель:

   * `утверждает` → договор получает статус `Согласован`, продолжается оплата.
   * `отклоняет` → возвращение договора на доработку.
4. После согласования кассир фиксирует факт оплаты (платёж привязывается к договору).
5. Система отмечает договор как `Оплачен`, меняет статус автомобиля на `Продан`, архивирует сделку и формирует запись в отчёте.

**Альтернативы:**

* Отказ руководителя → доработка договора.
* Частичная/неполная оплата → выставление остатка/авансового платежа.

(В диаграмме показать точки синхронизации: ожидание подтверждения руководителя / завершение платежа.) 

---

# 3. Диаграммы взаимодействия (Interaction)

## 3.1. Список объектов, участвующих во взаимодействии (таблица)

**Таблица объектов для прецедентов (пример):**

1. Прецедент: *Обработка записи клиента*

   * Клиент — физическое лицо, инициирующее заявку.
   * Кассир — оператор, вводящий заявку.
   * Система записи — контроллер процесса.
   * Прайс-лист / Каталог — источник информации по авто.
   * Заявка — объект бронирования/запроса. 

2. Прецедент: *Подбор и бронирование автомобиля*

   * Кассир, Система записи, Автомобиль, Запись/Бронь, База данных.

3. Прецедент: *Оформление договора и приём оплаты*

   * Кассир, Руководитель, Клиент, Договор, Платёж, Система отчётности, База данных.

(Полный список и описание объектов можно взять из ЛР5, таблицы абстракций и потоков событий.) 

## 3.2. Диаграммы последовательности (Sequence diagrams)

**Прецедент: «Обработка записи клиента» (sequence)** — краткое содержание:

* Клиент → Система (через интерфейс) : `создатьЗаявку(данные)`
* Система → База данных : `сохранить(Заявка)`
* Система → Прайс-лист : `найтиАвто(критерии)`
* Прайс-лист → Система : `результатПоиска`
* Система → Кассир : `уведомить(статус)`

Добавить альтернативные ветви для ошибок валидации и отсутствия авто.

**Прецедент: «Подбор и бронирование автомобиля» (sequence)**:

* Кассир → Система : `запроситьБронирование(автоId, заявкаId)`
* Система → БД : `проверитьСтатус(автоId)`
* БД → Система : `статус`
* [если `В наличии`] Система → БД : `создатьБронь`, `update(автоStatus=Забронирован)`
* Система → Клиент/Кассир : `подтвердитьБронь`, иначе `сообщитьОконфликт`

**Прецедент: «Оформление договора и приём оплаты» (sequence)**:

* Кассир → Система : `сформироватьДоговор(заявкаId)`
* Система → Руководитель : `отправитьНаСогласование(договорId)`
* Руководитель → Система : `утвердить/отклонить`
* [утвердил] Кассир → Система : `зарегистрироватьОплату(платёж)`
* Система → БД : `обновить(договор=Оплачен, авто=Продан)`
* Система → СистемаОтчётности : `создатьЗаписьПродажи`

(На диаграммах показать сообщения синхронные/асинхронные, времени жизни объектов и условия ветвления.) 

## 3.3. Кооперативные диаграммы (collaboration), при необходимости

Для прецедентов с большим количеством взаимодействующих объектов (например, полный процесс продажи — от заявки до архивации) построить кооперативную диаграмму, которая показывает распределение сообщений и ссылочные связи между объектами: `Клиент`, `Кассир`, `Система`, `Автомобиль`, `Договор`, `Платёж`, `Отчётность`, `БД`. Это помогает видеть структуру обязанностей и маршруты сообщений. 

---

# 4. Покрытие операций диаграммой поведения

Убедиться, что операции, указанные в диаграмме классов (ЛР5) — такие как `проверитьДоступность()`, `создатьБронь()`, `сформироватьДоговор()`, `зарегистрироватьОплату()` — присутствуют как действия или сообщения в соответствующих диаграммах поведения (state/activity/sequence). При расхождении: добавить недостающие операции в диаграмму классов или внести коррекции в диаграммы поведения. 

---

# ЗАКЛЮЧЕНИЕ

В ходе выполнения ЛР6 была выполнена адаптация функциональной модели поведения системы к теме «Автосалон» (основываясь на результатах ЛР5). Поставленные задачи выполнены:

* Выбраны три наиболее динамичных класса (Заявка, Автомобиль, Договор) и описаны их состояния и переходы. 
* Построены (описаны) диаграммы деятельности для ключевых прецедентов: обработка заявки, подбор/бронирование, оформление договора и приём оплаты. 
* Составлен список объектов взаимодействия и описаны последовательности сообщений для основных прецедентов.
* Проверено соответствие операций диаграмме классов; указаны шаги по устранению несоответствий (добавление операций в классы / коррекция диаграмм поведения).

Материалы ЛР5 использованы как основа при выборе прецедентов и объектов. Рекомендуется визуализировать все описанные диаграммы в UML-редакторе (например, draw.io, StarUML, PlantUML) и вставить полученные изображения в итоговый отчёт.

---

Если хочешь, я:

* могу **сгенерировать готовый .docx** (назову `Lab6_updated.docx`) с этим содержимым и подготовить файл для скачивания; **или**
* сразу **построю PlantUML**-скрипты для каждой диаграммы (state, activity, sequence), чтобы ты мог быстро получить картинки в любом UML-инструменте.

Какой вариант предпочитаешь? (Если нужен .docx — напишу и сохраню файл прямо сейчас.)
